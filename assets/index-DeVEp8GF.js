import{i as S}from"./_virtual___federation_fn_import-CtaBXHOA.js";import{r as l}from"./__federation_shared_react-CsUMYuEf.js";import{r as ee}from"./__federation_shared_react-dom-Dnnd693R.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function s(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(n){if(n.ep)return;n.ep=!0;const a=s(n);fetch(n.href,a)}})();var M={exports:{}},b={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var te=l,re=Symbol.for("react.element"),se=Symbol.for("react.fragment"),oe=Object.prototype.hasOwnProperty,ne=te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ae={key:!0,ref:!0,__self:!0,__source:!0};function $(e,t,s){var o,n={},a=null,i=null;s!==void 0&&(a=""+s),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(i=t.ref);for(o in t)oe.call(t,o)&&!ae.hasOwnProperty(o)&&(n[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps,t)n[o]===void 0&&(n[o]=t[o]);return{$$typeof:re,type:e,key:a,ref:i,props:n,_owner:ne.current}}b.Fragment=se;b.jsx=$;b.jsxs=$;M.exports=b;var r=M.exports,_={},A=ee;_.createRoot=A.createRoot,_.hydrateRoot=A.hydrateRoot;function ie(e,t){if(e instanceof RegExp)return{keys:!1,pattern:e};var s,o,n,a,i=[],c="",u=e.split("/");for(u[0]||u.shift();n=u.shift();)s=n[0],s==="*"?(i.push(s),c+=n[1]==="?"?"(?:/(.*))?":"/(.*)"):s===":"?(o=n.indexOf("?",1),a=n.indexOf(".",1),i.push(n.substring(1,~o?o:~a?a:n.length)),c+=~o&&!~a?"(?:/([^/]+?))?":"/([^/]+?)",~a&&(c+=(~o?"?":"")+"\\"+n.substring(a))):c+="/"+n;return{keys:i,pattern:new RegExp("^"+c+(t?"(?=$|/)":"/?$"),"i")}}var U={exports:{}},B={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x=l;function ce(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var le=typeof Object.is=="function"?Object.is:ce,de=x.useState,ue=x.useEffect,me=x.useLayoutEffect,pe=x.useDebugValue;function he(e,t){var s=t(),o=de({inst:{value:s,getSnapshot:t}}),n=o[0].inst,a=o[1];return me(function(){n.value=s,n.getSnapshot=t,j(n)&&a({inst:n})},[e,s,t]),ue(function(){return j(n)&&a({inst:n}),e(function(){j(n)&&a({inst:n})})},[e]),pe(s),s}function j(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!le(e,s)}catch{return!0}}function fe(e,t){return t()}var xe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?fe:he;B.useSyncExternalStore=x.useSyncExternalStore!==void 0?x.useSyncExternalStore:xe;U.exports=B;var ge=U.exports;const H=await S("react"),{useEffect:ye,useLayoutEffect:be,useRef:ve}=H,je=H.useInsertionEffect,we=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",F=we?be:ye,_e=je||F,k=e=>{const t=ve([e,(...s)=>t[0](...s)]).current;return _e(()=>{t[0]=e}),t[1]},Ne="popstate",E="pushState",R="replaceState",Se="hashchange",O=[Ne,E,R,Se],ke=e=>{for(const t of O)addEventListener(t,e);return()=>{for(const t of O)removeEventListener(t,e)}},q=(e,t)=>ge.useSyncExternalStore(ke,e,t),Ee=()=>location.search,Re=({ssrSearch:e=""}={})=>q(Ee,()=>e),C=()=>location.pathname,Pe=({ssrPath:e}={})=>q(C,e?()=>e:C),Le=(e,{replace:t=!1,state:s=null}={})=>history[t?R:E](s,"",e),Ae=(e={})=>[Pe(e),Le],T=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[T]>"u"){for(const e of[E,R]){const t=history[e];history[e]=function(){const s=t.apply(this,arguments),o=new Event(e);return o.arguments=arguments,dispatchEvent(o),s}}Object.defineProperty(window,T,{value:!0})}const Oe=(e="",t)=>t.toLowerCase().indexOf(e.toLowerCase())?"~"+t:t.slice(e.length)||"/",Ce=(e,t="")=>e[0]==="~"?e.slice(1):t+e,Te=e=>{try{return decodeURI(e)}catch{return e}},z={hook:Ae,searchHook:Re,parser:ie,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:e=>e},K=l.createContext(z),g=()=>l.useContext(K),De=l.createContext({}),v=e=>{const[t,s]=e.hook(e);return[Te(Oe(e.base,t)),k((o,n)=>s(Ce(o,e.base),n))]},Ie=()=>v(g()),V=(e,t,s,o)=>{const{pattern:n,keys:a}=e(t||"*",o),[i,...c]=n.exec(s)||[];return i!==void 0?[!0,Object.fromEntries(a.map((u,d)=>[u,c[d]])),...o?[i]:[]]:[!1,null]},G=({children:e,...t})=>{const s=g(),o=t.hook?z:s;let n=o;const[a,i]=t.ssrPath?.split("?")??[];i&&(t.ssrSearch=i,t.ssrPath=a),t.hrefs=t.hrefs??t.hook?.hrefs;let c=l.useRef({}),u=c.current,d=u;for(let m in o){const y=m==="base"?o[m]+(t[m]||""):t[m]||o[m];u===d&&y!==d[m]&&(c.current=d={...d}),d[m]=y,y!==o[m]&&(n=d)}return l.createElement(K.Provider,{value:n,children:e})},D=({children:e,component:t},s)=>t?l.createElement(t,{params:s}):typeof e=="function"?e(s):e,N=({path:e,nest:t,match:s,...o})=>{const n=g(),[a]=v(n),[i,c,u]=s??V(n.parser,e,a,t);if(!i)return null;const d=u?l.createElement(G,{base:u},D(o,c)):D(o,c);return l.createElement(De.Provider,{value:c,children:d})},Me=l.forwardRef((e,t)=>{const s=g(),[o,n]=v(s),{to:a,href:i=a,onClick:c,asChild:u,children:d,className:m,replace:y,state:mt,...X}=e,P=k(p=>{p.ctrlKey||p.metaKey||p.altKey||p.shiftKey||p.button!==0||(c?.(p),p.defaultPrevented||(p.preventDefault(),n(i,e)))}),L=s.hrefs(i[0]==="~"?i.slice(1):s.base+i,s);return u&&l.isValidElement(d)?l.cloneElement(d,{onClick:P,href:L}):l.createElement("a",{...X,onClick:P,href:L,className:m?.call?m(o===i):m,children:d,ref:t})}),J=e=>Array.isArray(e)?e.flatMap(t=>J(t&&t.type===l.Fragment?t.props.children:t)):[e],$e=({children:e,location:t})=>{const s=g(),[o]=v(s);for(const n of J(e)){let a=0;if(l.isValidElement(n)&&(a=V(s.parser,n.props.path,t||o,n.props.nest))[0])return l.cloneElement(n,{match:a})}return null},W=e=>{const{to:t,href:s=t}=e,[,o]=Ie(),n=k(()=>o(t||s,e));return F(()=>{n()},[]),null},Ue=()=>r.jsx("div",{children:r.jsx("div",{className:"p-6 font-sans bg-gray-50 min-h-screen",children:r.jsxs("div",{className:"max-w-3xl mx-auto bg-white shadow-lg rounded-lg p-8",children:[r.jsx("h1",{className:"text-4xl font-bold mb-6 text-blue-600",children:"Micro Frontend Setup Guide with TypeScript"}),r.jsx("p",{className:"mb-4 text-gray-700",children:"This guide outlines the setup and usage of a host application consuming remote applications via module federation and TypeScript for type sharing."}),r.jsx("h2",{className:"text-2xl font-semibold mt-6 mb-4 text-blue-500",children:"Prerequisites"}),r.jsxs("p",{className:"mb-4 text-gray-700",children:["Before running the host application, ensure the remote applications are installed and compiled. Check the other remote project's scripts for building and serving the application locally. Should be ",r.jsx("code",{className:"bg-gray-200 p-1 rounded",children:"npm run serve"})]}),r.jsx("h2",{className:"text-2xl font-semibold mt-6 mb-4 text-blue-500",children:"Directory Structure"}),r.jsxs("p",{className:"mb-4 text-gray-700",children:["Ideally, all projects should be located adjacent to each other in the directory structure. However, this is not mandatory. If the projects are installed in completely separate locations, update the ",r.jsx("code",{className:"bg-gray-200 p-1 rounded",children:"package.local.json"})," file location reference accordingly, e.g., ",r.jsx("code",{className:"bg-gray-200 p-1 rounded",children:'"@mf-app/remote": "file:../remote/dist/types"'}),". This setup ensures type references for the module-federated remote distribution."]}),r.jsx("h2",{className:"text-2xl font-semibold mt-6 mb-4 text-blue-500",children:"Remote Application Setup (Development Testing)"}),r.jsxs("ol",{className:"list-decimal list-inside mb-4 text-gray-700",children:[r.jsxs("li",{className:"mb-2",children:["Install dependencies: ",r.jsx("code",{className:"bg-gray-200 p-1 rounded",children:"npm install"})]}),r.jsxs("li",{className:"mb-2",children:["Serve all the remote applications:",r.jsxs("p",{className:"mt-2",children:["Before building or running this [host] app, the dependent remote apps (check their reference in ",r.jsx("code",{className:"bg-gray-200 p-1 rounded",children:"federation.config.ts"}),") need to be built and served locally:"]}),r.jsxs("p",{className:"mt-2",children:["Double check their scripts within their ",r.jsx("code",{className:"bg-gray-200 p-1 rounded",children:"package.json"})," file but should be:"]}),r.jsx("code",{className:"bg-gray-200 p-1 rounded block my-2",children:"npm run serve"}),r.jsx("p",{className:"mt-2",children:"This command performs the following actions:"}),r.jsxs("ul",{className:"list-disc list-inside ml-4",children:[r.jsx("li",{children:"Compiles the module-federated distribution entry file."}),r.jsxs("li",{children:["Generates the type references under ",r.jsx("code",{className:"bg-gray-200 p-1 rounded",children:"./dist/types"}),"."]}),r.jsxs("li",{children:["Serves the application at a fixed localhost such as ",r.jsx("code",{className:"bg-gray-200 p-1 rounded",children:"http://localhost:5000/"}),"."]})]})]})]}),r.jsx("h2",{className:"text-2xl font-semibold mt-6 mb-4 text-blue-500",children:"Host Application Setup (this project)"}),r.jsxs("ol",{className:"list-decimal list-inside mb-4 text-gray-700",children:[r.jsxs("li",{className:"mb-2",children:["Install Dependencies: ",r.jsx("code",{className:"bg-gray-200 p-1 rounded",children:"npm install"})]}),r.jsxs("p",{className:"mt-2",children:["A ",r.jsx("code",{className:"bg-gray-200 p-1 rounded",children:"postinstall"})," command is executed that checks for a ",r.jsx("code",{className:"bg-gray-200 p-1 rounded",children:"package.local.json"})," file with a structure similar to this:"]}),r.jsx("pre",{className:"bg-gray-200 p-4 rounded my-4 overflow-auto",children:r.jsx("code",{children:`{
  "devDependencies": {
    "@mf-app/remote": "file:../mf-app-react-remote/dist/types",
    "@mf-app/store": "file:../fm-app-store/dist/types"
  }
}`})}),r.jsx("p",{children:"This will install the types local package for type reference during development. This is not mandatory. Development can still be done without any errors. However, typings will not be available."}),r.jsxs("li",{className:"mb-2",children:["Run the host application: ",r.jsx("code",{className:"bg-gray-200 p-1 rounded",children:"npm run dev"})]}),r.jsx("p",{className:"mt-2",children:"This command starts the host application with hot module replacement (HMR), utilizing the module-federated distribution package from the remote application."})]}),r.jsx("h2",{className:"text-2xl font-semibold mt-6 mb-4 text-blue-500",children:"Notes"}),r.jsxs("p",{className:"mb-4 text-gray-700",children:["Any changes made to the remote applications must be re-compiled for the updates to take effect in the host application and ",r.jsx("code",{className:"bg-gray-200 p-1 rounded",children:"npm install"})," needs to be executed on this [host] app for the types to take effect."]}),r.jsx("h2",{className:"text-2xl font-semibold mt-6 mb-4 text-blue-500",children:"Project Dependencies"}),r.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[r.jsxs("li",{children:[r.jsx("a",{href:"https://github.com/dmifsud/mf-app-react-remote",className:"text-blue-600 hover:underline",children:"Remote Project"}),": contains dumb components and components that use the shared store."]}),r.jsxs("li",{children:[r.jsx("a",{href:"https://github.com/dmifsud/mf-app-store",className:"text-blue-600 hover:underline",children:"Shared Store"}),": Zustand Store for consistent state management across the host and remote project."]})]}),r.jsx("h2",{className:"text-2xl font-semibold mt-6 mb-4 text-blue-500",children:"References"}),r.jsx("a",{href:"https://stackoverflow.com/questions/75850348/how-to-create-a-types-only-package-on-npm",className:"text-blue-600 hover:underline",children:"https://stackoverflow.com/questions/75850348/how-to-create-a-types-only-package-on-npm"}),r.jsx("p",{className:"mt-6 text-gray-700",children:"To start, click the login button below. To login, type any email and any password."}),r.jsx(Me,{to:"/login",className:"mt-20 bg-blue-500 text-white font-bold py-2 px-4 rounded hover:bg-blue-600 transition duration-300",children:"Login"})]})})}),Be={"@mf-app/remote":{url:"https://dmifsud.github.io/mf-app-react-remote/mf-app-react-remote/assets/remoteEntry.js",format:"esm",from:"vite"},"@mf-app/store":{url:"https://dmifsud.github.io/mf-app-store/mf-app-store/assets/remoteEntry.js",format:"esm",from:"vite"}},He=async(e,t)=>{const s=typeof e=="function"?await e():e,o=document.createElement("script");o.type="text/javascript",o.onload=t,o.src=s,document.getElementsByTagName("head")[0].appendChild(o)};function w(e,t){return Fe(e).then(s=>()=>t==="webpack"&&Object.prototype.toString.call(s).indexOf("Module")>-1&&s.default?s.default:s)}function Y(e,t){const s=Object.assign(e,t);for(const o of Object.keys(s))typeof s[o]=="object"&&typeof t[o]=="object"&&(s[o]=Y(s[o],t[o]));return s}const I=e=>Y({react:{"18.3.1":{get:()=>w(new URL("__federation_shared_react-CsUMYuEf.js",import.meta.url).href,e),loaded:1}},"react-dom":{"18.3.1":{get:()=>w(new URL("__federation_shared_react-dom-Dnnd693R.js",import.meta.url).href,e),loaded:1}},zustand:{"4.5.2":{get:()=>w(new URL("__federation_shared_zustand-Ci0Y1mlc.js",import.meta.url).href,e),loaded:1}}},(globalThis.__federation_shared__||{}).default||{});async function Fe(e){return import(e)}async function qe(e){const t=Be[e];if(t.inited)return t.lib;if(t.format==="var")return new Promise(s=>{const o=()=>{t.inited||(t.lib=window[e],t.lib.init(I(t.from)),t.inited=!0),s(t.lib)};return He(t.url,o)});if(["esm","systemjs"].includes(t.format))return new Promise((s,o)=>{(typeof t.url=="function"?t.url:()=>Promise.resolve(t.url))().then(a=>{import(a).then(i=>{if(!t.inited){const c=I(t.from);i.init(c),t.lib=i,t.lib.init(c),t.inited=!0}s(t.lib)}).catch(o)})})}function h(e){return e?.__esModule||e?.[Symbol.toStringTag]==="Module"?e.default:e}function f(e,t){return qe(e).then(s=>s.get(t).then(o=>o()))}const ze=await f("@mf-app/remote","./components/auth/Login");let Ke=h(ze);const Ve=await f("@mf-app/store","./auth/store.auth");let Ge=h(Ve);const Je=()=>{const{isAuthenticated:e}=Ge();return r.jsx(r.Fragment,{children:e?r.jsx(W,{to:"/activities"}):r.jsx(Ke,{title:"Sign in to your Host App"})})},We=await f("@mf-app/remote","./components/courses/CourseActivities");let Ye=h(We);const Ze=await f("@mf-app/remote","./components/courses/CourseActivity");let Qe=h(Ze);const Xe=await f("@mf-app/store","./courses/activities/store.course-activities");let et=h(Xe);const{create:tt}=await S("zustand"),Z=tt(e=>({activity:null,setActivityToShow:t=>{const s=et.getState().data?.activities.find(o=>o.id===t);s&&e({activity:s})},clearActivity:()=>e({activity:null})})),rt=()=>{const{activity:e,clearActivity:t}=Z();return r.jsx(r.Fragment,{children:e&&r.jsx("div",{id:"small-modal",tabIndex:-1,onClick:s=>{s.target?.id==="small-modal"&&t()},className:"flex justify-center items-center fixed top-0 left-0 right-0 z-50 w-full p-4 overflow-x-hidden overflow-y-auto md:inset-0 h-[calc(100%-1rem)] max-h-full bg-gray-500 bg-opacity-40",children:r.jsx("div",{className:"relative w-full max-w-md max-h-full",children:r.jsx(Qe,{activity:e})})})})},st=()=>{const{setActivityToShow:e}=Z(),t=s=>{console.log("Selected course:",s),e(s)};return r.jsxs("div",{className:"flex justify-center",children:[r.jsx(rt,{}),r.jsx("div",{className:"w-[50%] p-10",children:r.jsx(Ye,{title:"Course Activities",onSelected:t})})]})},ot=await f("@mf-app/store","./auth/store.auth");let nt=h(ot);const at=await f("@mf-app/remote","./web-components/lit-button");let it=h(at);function ct(e){const{isAuthenticated:t,actions:s,loading:o}=nt();return t?r.jsxs("div",{children:[r.jsx("nav",{className:"bg-white dark:bg-gray-900 sticky w-full z-20 top-0 start-0 border-b border-gray-200 dark:border-gray-600",children:r.jsxs("div",{className:"max-w-screen-xl flex flex-wrap items-center justify-between mx-auto p-4",children:[r.jsx("h1",{className:"text-2xl font-semibold whitespace-nowrap dark:text-white",children:"MF Host App"}),r.jsx("div",{className:"flex md:order-2 space-x-3 md:space-x-0 rtl:space-x-reverse",children:r.jsx(it,{text:o?"Singing out...":"Sign Out",disabled:o,onClick:s.logout})}),r.jsx("div",{className:"items-center justify-between hidden w-full md:flex md:w-auto md:order-1",id:"navbar-sticky",children:r.jsxs("ul",{className:"flex flex-col p-4 md:p-0 mt-4 font-medium border border-gray-100 rounded-lg bg-gray-50 md:space-x-8 rtl:space-x-reverse md:flex-row md:mt-0 md:border-0 md:bg-white dark:bg-gray-800 md:dark:bg-gray-900 dark:border-gray-700",children:[r.jsx("li",{children:r.jsx("a",{href:"#",className:"block py-2 px-3 text-white bg-blue-700 rounded md:bg-transparent md:text-blue-700 md:p-0 md:dark:text-blue-500","aria-current":"page",children:"Home"})}),r.jsx("li",{children:r.jsx("a",{href:"#",className:"block py-2 px-3 text-gray-900 rounded hover:bg-gray-100 md:hover:bg-transparent md:hover:text-blue-700 md:p-0 md:dark:hover:text-blue-500 dark:text-white dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent dark:border-gray-700",children:"About"})}),r.jsx("li",{children:r.jsx("a",{href:"#",className:"block py-2 px-3 text-gray-900 rounded hover:bg-gray-100 md:hover:bg-transparent md:hover:text-blue-700 md:p-0 md:dark:hover:text-blue-500 dark:text-white dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent dark:border-gray-700",children:"Services"})}),r.jsx("li",{children:r.jsx("a",{href:"#",className:"block py-2 px-3 text-gray-900 rounded hover:bg-gray-100 md:hover:bg-transparent md:hover:text-blue-700 md:p-0 md:dark:hover:text-blue-500 dark:text-white dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent dark:border-gray-700",children:"Contact"})})]})})]})}),r.jsx(N,{...e})]}):r.jsx(W,{to:"/login"})}var lt={VITE_PORT:"3000",BASE_URL:"https://dmifsud.github.io/mf-app-react-host",MODE:"production",DEV:!1,PROD:!0,SSR:!1};console.log("env",lt);let Q="";Q="https://dmifsud.github.io/mf-app-react-host";function dt(){return r.jsx(G,{base:Q,children:r.jsxs($e,{children:[r.jsx(N,{path:"/",component:Ue}),r.jsx(N,{path:"/login",component:Je}),r.jsx(ct,{path:"/activities",component:st})]})})}const ut=await S("react");_.createRoot(document.getElementById("root")).render(r.jsx(ut.StrictMode,{children:r.jsx(dt,{})}));
